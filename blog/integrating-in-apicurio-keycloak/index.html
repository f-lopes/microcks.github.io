<!DOCTYPE html>
<html class="no-js" lang="en-us">
  <head>
    <meta charset="utf-8">
    
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:400,700|Source+Sans+Pro:300,700&display=swap" >

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     
    <title> Integrating Microcks into Apicurio Keycloak | Microcks.io</title>

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.90.1" />

      
        <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
      

    
    
      <link rel="stylesheet" href="/output/css/app.min.1458e95ab948da3cd07bca1fa2614cf04ce5addde65134332fa8fe5fb6fd3e1c.css" integrity="sha256-FFjpWrlI2jzQe8ofomFM8Ezlrd3mUTQzL6j&#43;X7b9Phw=" crossorigin="anonymous"> 
          
    


    

    
  <script type="text/javascript" src="/output/js/app.1caa725adf6b3c0d83460e78ce17051642a329cbe9222b7eccefa8def7cd7559.js" integrity="sha256-HKpyWt9rPA2DRg54zhcFFkKjKcvpIit&#43;zO&#43;o3vfNdVk=" crossorigin="anonymous" defer></script>
      
 



<script async defer src="https://buttons.github.io/buttons.js"></script>

      
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0594cb">
<meta name="theme-color" content="#ffffff">
<meta property="og:title" content="Integrating Microcks into Apicurio Keycloak" />
<meta property="og:description" content="Microcks is an amazing tool that helps developers mock their APIs seamlessly using OpenAPI specs. This makes it easy for distributed teams to develop complex micro-services without having to wait for full development cycles to complete, thus maximising team efficiencies.
Apicurio Studio is another great tool to start creating your API documentations via a fully integrated OpenAPI spec editor and adds features like ability to view your documentation live as teams collaborate and edit specs on the editor in real-time." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://microcks.io/blog/integrating-in-apicurio-keycloak/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-11-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-11-20T00:00:00+00:00" />


      <meta name="og:image" content="https://microcks.io/images/blog/integrating-microcks-in-apicurio-keycloak.png"/>
      <meta property="og:image" content="https://microcks.io/images/blog/integrating-microcks-in-apicurio-keycloak.png"/>
      <meta itemprop="name" content="Integrating Microcks into Apicurio Keycloak">
<meta itemprop="description" content="Microcks is an amazing tool that helps developers mock their APIs seamlessly using OpenAPI specs. This makes it easy for distributed teams to develop complex micro-services without having to wait for full development cycles to complete, thus maximising team efficiencies.
Apicurio Studio is another great tool to start creating your API documentations via a fully integrated OpenAPI spec editor and adds features like ability to view your documentation live as teams collaborate and edit specs on the editor in real-time."><meta itemprop="datePublished" content="2020-11-20T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-11-20T00:00:00+00:00" />
<meta itemprop="wordCount" content="1039">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Integrating Microcks into Apicurio Keycloak"/>
<meta name="twitter:description" content="Microcks is an amazing tool that helps developers mock their APIs seamlessly using OpenAPI specs. This makes it easy for distributed teams to develop complex micro-services without having to wait for full development cycles to complete, thus maximising team efficiencies.
Apicurio Studio is another great tool to start creating your API documentations via a fully integrated OpenAPI spec editor and adds features like ability to view your documentation live as teams collaborate and edit specs on the editor in real-time."/>

      <meta name="twitter:image" content="https://microcks.io/images/blog/integrating-microcks-in-apicurio-keycloak.png"/>
      <meta property="twitter:image" content="https://microcks.io/images/blog/integrating-microcks-in-apicurio-keycloak.png"/>
      

      
        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9TK2NJ5V4J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  
  gtag('config', 'G-9TK2NJ5V4J', {'dimension1': 'microcks.io', 'dimension2': ''});



var trackOutboundLink = function(id, url) {
  gtag('event', 'click', {
    'event_category': 'outbound',
    'event_label': id,
    'transport_type': 'beacon',
    'event_callback': function(){document.location = url;}
  });
}

</script>

      
      
  </head>
  <body class="ma0 sans-serif bg-primary-color-light production">
    
<nav class="bg-primary-color-dark pv4 w-100" role="navigation">

  <div class="center flex-ns flex-wrap items-center justify-start mw9">

    <img src="/images/microcks-round.png" class="logo-img dn-ns dn-xs dib-l">

    <h1 class="dim f2 lh-solid mr0 ml6-l ml2-ns pl3-ns ml3-xs mv0 fem">
      <a href="https://microcks.io" class="link white">
        MICROCKS
      </a>
    </h1>
    
    <ul class="list ma0 pa0 dn dib-l ml-auto-l">
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/news/" class="dim link light-silver">
            NEWS
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/documentation/" class="dim link light-silver">
            DOCS
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/blog/" class="dim link light-silver">
            BLOG
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/resources/" class="dim link light-silver">
            RESOURCES
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="/community/" class="dim link light-silver">
            COMMUNITY
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4 fem" role="menuitem">
            
          <a href="https://github.com/microcks/microcks" class="dim link light-silver">
            GITHUB
              
            
            
              <span class="pl1">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link">
<path d="M25.152 16.576v5.696q0 2.144-1.504 3.648t-3.648 1.504h-14.848q-2.144 0-3.648-1.504t-1.504-3.648v-14.848q0-2.112 1.504-3.616t3.648-1.536h12.576q0.224 0 0.384 0.16t0.16 0.416v1.152q0 0.256-0.16 0.416t-0.384 0.16h-12.576q-1.184 0-2.016 0.832t-0.864 2.016v14.848q0 1.184 0.864 2.016t2.016 0.864h14.848q1.184 0 2.016-0.864t0.832-2.016v-5.696q0-0.256 0.16-0.416t0.416-0.16h1.152q0.256 0 0.416 0.16t0.16 0.416zM32 1.152v9.12q0 0.48-0.352 0.8t-0.8 0.352-0.8-0.352l-3.136-3.136-11.648 11.648q-0.16 0.192-0.416 0.192t-0.384-0.192l-2.048-2.048q-0.192-0.16-0.192-0.384t0.192-0.416l11.648-11.648-3.136-3.136q-0.352-0.352-0.352-0.8t0.352-0.8 0.8-0.352h9.12q0.48 0 0.8 0.352t0.352 0.8z"></path>
</svg>

              </span>
            
          </a>
        </li>
      
    </ul>

    <div class="db dib-ns pl3 pl4-ns pl2-xs"><form id="site-search-form" action="" role="search">
  <fieldset class="bn ma0 pa0">
    <label class="clip" for="search-input">Search</label>
    <input type="search" id="search-input" class="needs-js bg-left bn f5 input-reset lh-solid mt3 mt0-ns pl4 pv2 w5 white fem" placeholder="Search the Docs" name="search-input" value="" style="background: transparent url('/images/icon-search.png') no-repeat 0 8px /16px 16px;">
  </fieldset>
</form>

</div>

    <span class="absolute mt0 pr3 right-0 top-0">
<a href="https://github.com/microcks" class="github-corner hidden-md-down" aria-label="View source on Github" rel="nofollow" target="_blank">
  <svg width="74" height="74" viewBox="0 0 250 250" style="fill:#fff;z-index:2000;color:#1a3932;mix-blend-mode:screen;position:absolute;top:0;border:0;right:0" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7
      120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9
      125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6
      C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0
      C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1
      C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4
      C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9
      C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5
      C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9
      L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body">
    </path>
  </svg>
</a>
</span>

  </div>
</nav>

    
    <main role="main" class="content-with-sidebar min-vh-100 pb7 pb0-ns">
      

<section class="cf ph4 pv3 pv3-ns bg-white">
  <div class="w-60 w-70-m w-90-xs center tc tc-ns pv3">
    <h1 class="primary-color-dark">Integrating Microcks into Apicurio Keycloak</h1>
  </div>
  <div class="w-60-l w-70-m w-90-xs center">
    <div class="flex-ns flex-wrap">
      <div class="w-10 w-40-xs">
        <img src="/images/blog/bio/nareshkrish.png" alt="Integrating Microcks into Apicurio Keycloak" class="br4" style="width: 48px">  
      </div>
      <div class="w-40 w-70-xs">
        <div class="f6 pv2" style="vertical-align: super;">
          <b>Naresh Krish</b> 
          ( <a href="https://twitter.com/narioinc" class="home-link">@narioinc</a>
             )
          <br/> Community member - on Nov 20, 2020
        </div>
      </div>
      <div class="w-50 w-90-xs tr">
        



<a class="resp-sharing-button__link" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmicrocks.io%2fblog%2fintegrating-in-apicurio-keycloak%2f" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmicrocks.io%2fblog%2fintegrating-in-apicurio-keycloak%2f&amp;text=Integrating%20Microcks%20into%20Apicurio%20Keycloak&amp;via=MicrocksIO" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fmicrocks.io%2fblog%2fintegrating-in-apicurio-keycloak%2f" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2fmicrocks.io%2fblog%2fintegrating-in-apicurio-keycloak%2f&amp;resubmit=true&amp;title=Integrating%20Microcks%20into%20Apicurio%20Keycloak" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg>
    </div>
  </div>
</a>
      </div>
    </div>
  </div>
  <div class="flex-ns flex-wrap">
    <div class="w-60-l w-70-m w-90-xs center">
      <div class="prose pv3 f4" id="prose"><p>Microcks is an amazing tool that helps developers mock their APIs seamlessly using <a href="https://www.openapis.org/">OpenAPI</a> specs. This makes it easy for distributed teams to develop complex micro-services without having to wait for full development cycles to complete, thus maximising team efficiencies.</p>
<p><a href="https://www.apicur.io/studio/">Apicurio Studio</a> is another great tool to start creating your API documentations via a fully integrated OpenAPI spec editor and adds features like ability to view your documentation live as teams collaborate and edit specs on the editor in real-time.</p>
<p>A cool feature in Apicurio is the ability to integrate seamlessly with Microcks to mock the API definition with just a single click. This yields to a great developer experience overall as clients can start consuming mock endpoints with sample responses even if the actual API is going through the CI pipeline and yet to reach staging or production environments.</p>
<p>However, the latest version of Microcks (version <code>1.1.0</code> as of writing this post) doesn&rsquo;t work if we follow the Apicurio docker-compose installation. One of the main reason being the <a href="https://www.keycloak.org/">Keycloak</a> realm in the Apicurio installation is not uptodate for the changes made in Microcks, especially with the missing &ldquo;user&rdquo; role in the <strong>microcks-app</strong> client in the Keycloak realm setting.</p>
<p><img src="/images/blog/integrating-microcks-in-apicurio-keycloak.png" alt="integrating-microcks-in-apicurio-keycloak"></p>
<blockquote>
<p>As of publishing this article, I proposed a <a href="https://github.com/Apicurio/apicurio-studio/pull/1323">Pull Request</a> to fix and ease this setup. Event if the steps described below might no longer be necessary, this post helps understand how things are supposed to work and the elements to check in case of troubles 😉</p>
</blockquote>
<p>Also for users who just want to take the installation for a spin on localhost, may face the issue with SSL being a pre-requisite to using Keycloak with Apicurio. I strongly <strong>RECOMMEND</strong> to ensure that you have TLS setup for anything in production, but I will provide steps to overcome this limitation for setting up Apicurio and Microcks in development environments.</p>
<h2 id="downloading-and-getting-ready-with-the-apicurio-setup">Downloading and getting ready with the Apicurio setup</h2>
<p>The steps to setup Apicurio are similar to the steps mentioned in their GitHub docker-compose readme page. As of writing this article, Apicurio is at version <code>BETA 2.46</code></p>
<ul>
<li>
<p>Clone the Apicurio repository in a convenient location</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">git clone https://github.com/Apicurio/apicurio-studio.git
</code></pre></div></li>
<li>
<p>Cd to the directory to enter the Apicurio docker-compose installation workspace. Its now time to make a few edits</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">cd</span> apicurio-studio/distro/docker-compose
</code></pre></div></li>
</ul>
<h2 id="setting-up-the-correct-realm-configuration-in-keycloak">Setting up the correct realm configuration in Keycloak</h2>
<p>Once your inside the docker-compose workspace. Make the following edits:</p>
<ul>
<li>
<p>Replace the Keycloak realm configuration with the correct one from Microcks repository. Start by changing to the config directory.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">cd</span> config/keycloak
</code></pre></div></li>
<li>
<p>Download the copy of the correct Keycloak realm file from Microcks repository.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">wget https://raw.githubusercontent.com/microcks/microcks/master/install/keycloak-microcks-realm-full.json
</code></pre></div></li>
<li>
<p>Rename the existing Microcks realm file to something different.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">mv microcks-realm.json microcks-realm.json.bkup
</code></pre></div></li>
<li>
<p>Rename the realm file you downloaded above to <code>microcks-realm.json</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">mv keycloak-microcks-realm-full.json microcks-realm.json
</code></pre></div></li>
</ul>
<p>These steps will ensure that you have the correct realm configuration to start the installation. Once done, follow the remaining instructions as-is in the Apicurio docker-compose readme here <a href="https://github.com/Apicurio/apicurio-studio/blob/master/distro/docker-compose/Readme.md">https://github.com/Apicurio/apicurio-studio/blob/master/distro/docker-compose/Readme.md</a></p>
<h2 id="ensuring-the-user-role-is-present-correctly-in-the-microcks-app-client">Ensuring the &ldquo;user&rdquo; role is present correctly in the microcks-app client</h2>
<p>Once your installation is up and running, login to Keycloak with your admin credential and follow the following steps:</p>
<ul>
<li>
<p>Click on <em>Client -&gt; microcks-app</em>.</p>
</li>
<li>
<p>Click on Roles tab and check to confirm if the &ldquo;<em>user</em>&rdquo; role set correctly. If the role is not present, just create one using the &ldquo;Add Role&rdquo; button and give the name of the role as &ldquo;<em>user</em>&rdquo; and press &ldquo;Save&rdquo;.</p>
</li>
</ul>
<p><img src="/images/blog/keycloak-microcks-app-user-role.png" alt="keycloak-microcks-app-user-role"></p>
<ul>
<li>
<p>Now, click on Client again and move to <code>microcks-app-js</code>.</p>
</li>
<li>
<p>Here click on &ldquo;Scope&rdquo; and ensure <em>Full Scope allowed</em> is &ldquo;ON&rdquo;</p>
</li>
</ul>
<p><img src="/images/blog/keycloak-microcks-app-js-scope.png" alt="keycloak-microcks-app-js-scope"></p>
<h2 id="creating-users-in-microcks-keycloak-realm">Creating users in Microcks Keycloak realm</h2>
<p>Now go ahead and create a user in Microcks realm. Once a user is created, Follow the steps below to ensure that the user is setup correctly.</p>
<ul>
<li>Ensure that the user has a role called &ldquo;user&rdquo; in the client role section under <code>microcks-app</code> client. For checking this, click on the user in the Users page and navigate to the Role Mappings tab.</li>
<li>Here in the Client roles drop-down select <em>microcks-app</em>. You should see the an entry called &ldquo;<em>user</em>&rdquo; in Assigned Roles and Effective Roles sections (both should have it)</li>
<li>Once this confirmed. Navigate to <em>Clients -&gt; microcks-app-js</em></li>
<li>Here, click on the Client scopes and then Evaluate</li>
<li>In the user input, enter the name of the user whom you want to check and then click &ldquo;Evaluate&rdquo;</li>
</ul>
<p><img src="/images/blog/keycloak-client-scope-evaluation.png" alt="keycloak-client-scope-evaluation.png"></p>
<ul>
<li>In the form that pops up up below, click on &ldquo;Effective Role Scope Mapping&rdquo;</li>
<li>Here, under Client roles drop down, select <code>microcks-app</code>.</li>
<li>You should see the &ldquo;<em>user</em>&rdquo; role in the Granted Effective Client Role section.</li>
</ul>
<h2 id="logging-in-to-microcks-">Logging in to Microcks !</h2>
<p>Now login to Microcks app and mock away !!! You should see any APIs that you posted from Apicurio or specs that you manually uploaded using the Importers section, come up correctly in the <em>Dashboard</em> and the <em>APIs | Services</em> section</p>
<h2 id="skipping-tls-">Skipping TLS !!!!</h2>
<blockquote>
<p><strong>Dragons ahead !! BEWARE</strong>, at no point should this be done for production environment. TLS is one of the first steps to ensuring a strong and secure environment for the tools we are working with and at no point should you disable SSL-required configuration in Keycloak. This is ONLY for development purposes. Also this change is ONLY required when you make external calls to these services. If you provide your Apicurio IP in the range of <code>192.168.\*.\*</code> or <code>127.0.0.1</code> or <code>localhost</code> you can just set the SSL-required setting in your Keycloak realm&rsquo;s &lsquo;Login&rsquo; setting to false (or OFF as in the UI console).</p>
</blockquote>
<p>For those independent developers and coders/hobbyist, use services like <a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a> to get your free TLS certs to use with these services.</p>
<p>Now for the steps:</p>
<ul>
<li>
<p>Stop your docker-compose installation of Apicurio.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">docker-compose -f <span class="s2">&#34;&lt;name of the compose files&gt;&#34;</span> down
</code></pre></div></li>
<li>
<p>Download the application.properties file into you Apicurio&rsquo;s docker-compose config folder as shown below</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">cd</span> docker-compose/config
wget https://raw.githubusercontent.com/microcks/microcks/master/install/docker-compose/config/application.properties
wget https://raw.githubusercontent.com/microcks/microcks/master/install/docker-compose/config/logback.xml
</code></pre></div></li>
<li>
<p>Comment &lsquo;all&rsquo; the lines in application.properties except the following lines and change them as shown below:</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">security.require-ssl=false
keycloak.ssl-required=false
</code></pre></li>
<li>
<p>Restart your Apicurio installation. The Keycloak system and the <code>RequestAuthenticator</code> class will not complain of SSL-required for external requests now. You can check in the docker logs as well.</p>
</li>
</ul>
<p>I hope this blog post provides an interim solution to the Apicurio-Microcks installation woes. I have raised a <a href="https://github.com/Apicurio/apicurio-studio/issues/1319#issuecomment-726690052">bug</a> and proposed a <a href="https://github.com/Apicurio/apicurio-studio/pull/1323">Pull Request</a> for the permanent fix for this to the Apicurio team. Until then, Happy Mocking !!</p>
</div>
      
      
      <div class="pv4">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "microcks-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
      
    </div>
  </div>
</section>

    </main>

    <footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role="contentinfo">
    <div class="center flex-ns flex-wrap justify-between mw9 w-90">
      <div class="pb3 pt4 w-100 w-50-ns">

         <div class="b f3  light-gray mb3 nested-links tc">
           By the <a href="https://github.com/microcks/microcks/graphs/contributors" class="link">Microcks Authors</a><br />
          </div>

          <ul class="center f6 list ma0 mv3 pa0 tc"></ul>

          <ul class="center f6 list ma0 mv4 pa0 tc">
            <li class="dib mr3"><a href="https://twitter.com/microcksIO" class="dim link light-gray pv2">@MicrocksIO</a></li>
            <li class="dib mr3"><a href="https://twitter.com/lbroudoux" class="dim link light-gray pv2">@lbroudoux</a></li>
            <li class="dib mr3"><a href="https://twitter.com/yadayac" class="dim link light-gray pv2">@YadaYac</a></li>
          </ul>

          

      </div>

       
      
      <div class="pb3 pt4 w-100 w-50-ns">
        <div class="b f3 light-gray mb3 nested-links tc">
          Join our <a href="https://microcksio.zulipchat.com" target="new" class="link">Zulip</a> or <a href="https://github.com/microcks/microcks/discussions" target="new" class="link">GitHub</a> community chats<br/>
          <a href="https://microcksio.zulipchat.com" target="new"><img src="/images/zulip.png" class="center h3 br3 mt2"/></a>
          <a href="https://github.com/microcks/microcks/discussions" target="new"><img src="/images/GitHub-Mark-Light-120px-plus.png" class="center h3 br2 mt2 pl4"/></a>
        </div>

      </div>
    </div>

    <div class="f7 gray mb5 mb0-ns ph3 w-100">
      <p class="dib mr4">
        The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a class="gray" href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a>. <br/>
        Icons by Made x Made from the Noun Project.<br/>
      </p>
    </div>

    
    
    

    <div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 w-100"><div  class="globalmenu mobilemenu pb3 dn">
    

<ul class="list hidden dib ph0 ma0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/news/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          News
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Docs
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/blog/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Blog
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/resources/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Resources
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/community/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Community
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://github.com/microcks/microcks" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          GitHub
        </a>
    </li>
  
</ul>

</div>
<div  class="docsmenu mobilemenu pb3 dn">
    

<ul class="list dib ph0 ma0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//using/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Using
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//installing/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Installing
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//automating/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Automating
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//administrating/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Administrating
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
        <a href="/documentation//guides/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Guides
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//resources/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Resources
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="/documentation//community/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Community
        </a>
    </li>
  
</ul>

</div>

<div class="flex dn-l justify-between pt3-xs">
  <button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".globalmenu">Menu</button>

  <button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".docsmenu">Docs Menu</button>
</div>
</div>

</footer>

    

  </body>
</html>
